{"version":3,"sources":["config.js","hooks/useConfigGraph.js","hooks/useNextState.js","components/ModelGraph.js","helpers/exportHelper.js","App.js","index.js"],"names":["getApiInstanse","axios","create","baseURL","useConfigGraph","useState","loading","setLoading","configure","params","post","then","message","success","catch","error","console","log","useNextState","data","setData","fetch","get","res","Text","Typography","ModelGraph","isStartedModel","isConfig","nodesInColumn","time","interval","changeModel","startModel","stopModel","elapsedTime","setElapsedTime","useEffect","intervalId","setInterval","clearInterval","nodes","forEach","node","i","state","label","id","toString","color","level","edges","countInRow","push","from","to","generateEdges","style","marginBottom","width","margin","gutter","justify","span","type","strong","workingNodeCount","serviceNodeCount","defectiveNodeCount","resourceCount","disabled","onClick","danger","height","background","borderTop","borderBottom","graph","options","layout","hierarchical","physics","interaction","dragNodes","selectable","shape","size","font","borderWidth","getCanvasImage","document","querySelector","toDataURL","Spin","setDefaultIndicator","LoadingOutlined","fontSize","spin","Title","Panel","Collapse","App","isStart","setIsStart","setIsConfig","setNodesInCoumn","startConfig","setStartConfig","currentState","setCurrentState","setTime","Content","defaultActiveKey","header","onFinish","nodeCount","NodeCount","WorkingNodeCount","ServiceNodeCount","DefectiveNodeCount","WorkingTimeMilliseconds","workingTimeMilliseconds","ServiceTimeMilliseconds","serviceTimeMilliseconds","RepairTimeMilliseconds","repairTimeMilliseconds","ResourceCount","ServicePrice","servicePrice","Math","round","sqrt","padding","Item","name","initialValue","rules","required","onChange","v","value","htmlType","imageBase64","doc","Document","styles","default","heading1","run","bold","italics","paragraph","spacing","after","before","heading2","paragraphStyles","basedOn","next","quickFormat","sections","properties","children","Paragraph","text","heading","HeadingLevel","HEADING_1","HEADING_2","Table","rows","TableRow","TableCell","ImageRun","transformation","Packer","toBlob","blob","saveAs","exportToDocx","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ab72099b.chunk.js","sourcesContent":["import axios from \"axios\"\r\n\r\nexport const BASE_URL = \"https://localhost:5001\"\r\nexport const CONFIG_URL = \"/config/new\"\r\nexport const NEXT_STATE_URL = \"/graph/state\"\r\n\r\nexport const getApiInstanse = () => {\r\n    return axios.create({\r\n        baseURL: BASE_URL,\r\n    })\r\n}\r\n","import { useState } from \"react\"\r\nimport { getApiInstanse, CONFIG_URL } from \"../config\"\r\nimport { message } from \"antd\"\r\n\r\nconst useConfigGraph = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const configure = (params) => {\r\n        setLoading(true)\r\n\r\n        return getApiInstanse()\r\n            .post(CONFIG_URL, params)\r\n            .then(() => {\r\n                message.success(\"Конфигурация модели прошла успешно\")\r\n                setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n                message.error(\"Произошла ошибка: \" + error.message)\r\n                console.log(error)\r\n\r\n                setLoading(false)\r\n            })\r\n    }\r\n\r\n    return { configure, loading }\r\n}\r\n\r\nexport default useConfigGraph\r\n","import { useState } from \"react\"\r\nimport { getApiInstanse, NEXT_STATE_URL } from \"../config\"\r\n\r\nconst useNextState = () => {\r\n    const [data, setData] = useState({})\r\n    const fetch = () => {\r\n        getApiInstanse()\r\n            .get(NEXT_STATE_URL)\r\n            .then((res) => {\r\n                setData(res.data)\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    return { data, fetch }\r\n}\r\n\r\nexport default useNextState\r\n","import React, { useEffect, useState } from \"react\"\r\n\r\nimport useNextState from \"../hooks/useNextState\"\r\nimport Graph from \"react-graph-vis\"\r\nimport { Row, Col, Typography, Button, Space } from \"antd\"\r\n\r\nconst { Text } = Typography\r\n\r\nconst ModelGraph = ({\r\n    isStartedModel,\r\n    isConfig,\r\n    nodesInColumn,\r\n    time,\r\n    interval,\r\n    changeModel,\r\n    startModel,\r\n    stopModel,\r\n}) => {\r\n    const { data, fetch } = useNextState()\r\n    const [elapsedTime, setElapsedTime] = useState(0)\r\n\r\n    useEffect(() => {\r\n        if (isStartedModel && elapsedTime < time) {\r\n            const intervalId = setInterval(() => {\r\n                setElapsedTime(elapsedTime + 1)\r\n                fetch()\r\n            }, interval)\r\n\r\n            return () => clearInterval(intervalId)\r\n        }\r\n    }, [fetch, setElapsedTime, isStartedModel, elapsedTime, interval, time])\r\n\r\n    useEffect(() => {\r\n        changeModel(data)\r\n    }, [data, changeModel])\r\n\r\n    const nodes = data.nodes || []\r\n\r\n    const getColor = (state) => {\r\n        if (state === 0) {\r\n            return \"#00bb00\"\r\n        }\r\n\r\n        if (state === 1) {\r\n            return \"#FFED3D\"\r\n        }\r\n\r\n        return \"#bb0000\"\r\n    }\r\n\r\n    const generateEdges = (countInRow) => {\r\n        const edges = []\r\n        nodes.forEach((node) => {\r\n            if (node.level !== nodesInColumn) edges.push({ from: node.id, to: node.id + 1 })\r\n            edges.push({ from: node.id, to: node.id + countInRow })\r\n        })\r\n\r\n        return edges\r\n    }\r\n\r\n    nodes.forEach((node, i) => {\r\n        node.label = node.id.toString()\r\n        node.color = getColor(node.state)\r\n        node.level = (i % nodesInColumn) + 1\r\n    })\r\n\r\n    const edges = generateEdges(nodesInColumn)\r\n\r\n    const options = {\r\n        layout: {\r\n            hierarchical: true,\r\n        },\r\n        physics: false,\r\n        interaction: {\r\n            dragNodes: false,\r\n            selectable: false,\r\n        },\r\n        nodes: {\r\n            shape: \"dot\",\r\n            size: 28,\r\n            font: {\r\n                size: 24,\r\n                color: \"#222\",\r\n            },\r\n            borderWidth: 2,\r\n        },\r\n        edges: {\r\n            width: 2,\r\n        },\r\n    }\r\n\r\n    return (\r\n        <Row style={{ marginBottom: \"50px\" }}>\r\n            <div style={{ width: \"80vw\", margin: \"20px auto\" }}>\r\n                <Row gutter={[20, 20]} justify=\"space-between\">\r\n                    <Col span={8}>\r\n                        <Text>\r\n                            Кол-во работающих узлов:{\" \"}\r\n                            <Text type=\"success\" strong>\r\n                                {data.workingNodeCount || 0}\r\n                            </Text>\r\n                        </Text>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                        <Text>\r\n                            Кол-во узлов в сервисе:{\" \"}\r\n                            <Text type=\"warning\" strong>\r\n                                {data.serviceNodeCount || 0}\r\n                            </Text>\r\n                        </Text>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                        <Text>\r\n                            Кол-во неисправных узлов:{\" \"}\r\n                            <Text type=\"danger\" strong>\r\n                                {data.defectiveNodeCount || 0}\r\n                            </Text>\r\n                        </Text>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                        <Text>\r\n                            Ресурсов осталось: <Text strong>{data.resourceCount || 0}</Text>\r\n                        </Text>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                        <Text>\r\n                            Прошедшее время: <Text strong>{data.elapsedTime || 0}</Text>\r\n                        </Text>\r\n                    </Col>\r\n                    <Col span={8}>\r\n                        <Space>\r\n                            <Button disabled={!isConfig || isStartedModel} type=\"primary\" onClick={startModel}>\r\n                                Старт\r\n                            </Button>\r\n\r\n                            <Button disabled={!isStartedModel} type=\"primary\" danger onClick={stopModel}>\r\n                                Стоп\r\n                            </Button>\r\n                        </Space>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n            <Graph\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"600px\",\r\n                    background: \"#f5f5f5\",\r\n                    borderTop: \"solid 1px rgba(0,0,0,.1)\",\r\n                    borderBottom: \"solid 1px rgba(0,0,0,.1)\",\r\n                }}\r\n                graph={{ nodes, edges }}\r\n                options={options}\r\n            />\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default ModelGraph\r\n","import { Document, Packer, Paragraph, HeadingLevel, TableRow, TableCell, Table, ImageRun } from \"docx\"\r\nimport { saveAs } from \"file-saver\"\r\n\r\nexport const exportToDocx = (startConfig, currentState) => {\r\n    const imageBase64 = getCanvasImage()\r\n\r\n    const doc = new Document({\r\n        styles: {\r\n            default: {\r\n                heading1: {\r\n                    run: {\r\n                        size: 32,\r\n                        bold: true,\r\n                        italics: false,\r\n                        color: \"000000\",\r\n                    },\r\n                    paragraph: {\r\n                        spacing: {\r\n                            after: 240,\r\n                            before: 150,\r\n                        },\r\n                    },\r\n                },\r\n                heading2: {\r\n                    run: {\r\n                        size: 26,\r\n                        bold: false,\r\n                        italics: false,\r\n                        color: \"2E74B5\",\r\n                    },\r\n                    paragraph: {\r\n                        spacing: {\r\n                            after: 150,\r\n                            before: 250,\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n            paragraphStyles: [\r\n                {\r\n                    id: \"p\",\r\n                    name: \"paragraph\",\r\n                    basedOn: \"Normal\",\r\n                    next: \"Normal\",\r\n                    quickFormat: true,\r\n                    run: {\r\n                        size: 24,\r\n                        color: \"000000\",\r\n                    },\r\n                },\r\n            ],\r\n        },\r\n        sections: [\r\n            {\r\n                properties: {},\r\n                children: [\r\n                    new Paragraph({\r\n                        text: \"Начальные параметры модели\",\r\n                        heading: HeadingLevel.HEADING_1,\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        text: \"Начальное кол-во узлов\",\r\n                        heading: HeadingLevel.HEADING_2,\r\n                    }),\r\n\r\n                    new Table({\r\n                        rows: [\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во работающих узлов (Su)\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во узлов в сервисе (So)\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во дефектных узлов (Sh)\", style: \"p\" })],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${startConfig.WorkingNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${startConfig.ServiceNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${startConfig.DefectiveNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                        ],\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        text: \"Параметры времени\",\r\n                        heading: HeadingLevel.HEADING_2,\r\n                    }),\r\n\r\n                    new Table({\r\n                        rows: [\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({\r\n                                                text: \"Кол-во времени в работе в секундах (Тг)\",\r\n                                                style: \"p\",\r\n                                            }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({\r\n                                                text: \"Кол-во времени в сервисе в секундах (Тo)\",\r\n                                                style: \"p\",\r\n                                            }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: \"Время обслуживания в секундах (Тp)\", style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({\r\n                                                text: `${startConfig.WorkingTimeMilliseconds}`,\r\n                                                style: \"p\",\r\n                                            }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({\r\n                                                text: `${startConfig.ServiceTimeMilliseconds}`,\r\n                                                style: \"p\",\r\n                                            }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({\r\n                                                text: `${startConfig.RepairTimeMilliseconds}`,\r\n                                                style: \"p\",\r\n                                            }),\r\n                                        ],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                        ],\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        text: \"Настройки ресурсов\",\r\n                        heading: HeadingLevel.HEADING_2,\r\n                    }),\r\n\r\n                    new Table({\r\n                        rows: [\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во ресурсов на один узел\", style: \"p\" })],\r\n                                    }),\r\n\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Стоимость обслуживания (Ro)\", style: \"p\" })],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: `${startConfig.ResourceCount}`, style: \"p\" })],\r\n                                    }),\r\n\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: `${startConfig.ServicePrice}`, style: \"p\" })],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                        ],\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        text: \"Параметры на конец моделирования\",\r\n                        heading: HeadingLevel.HEADING_1,\r\n                    }),\r\n\r\n                    new Table({\r\n                        rows: [\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во работающих узлов (Su)\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во узлов в сервисе (So)\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Кол-во дефектных узлов (Sh)\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Остаток ресурсов\", style: \"p\" })],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: \"Прошедшее время\", style: \"p\" })],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                            new TableRow({\r\n                                children: [\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${currentState.workingNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${currentState.serviceNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${currentState.defectiveNodeCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [\r\n                                            new Paragraph({ text: `${currentState.resourceCount}`, style: \"p\" }),\r\n                                        ],\r\n                                    }),\r\n                                    new TableCell({\r\n                                        children: [new Paragraph({ text: `${currentState.elapsedTime}`, style: \"p\" })],\r\n                                    }),\r\n                                ],\r\n                            }),\r\n                        ],\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        text: \"Граф на конец моделирования\",\r\n                        heading: HeadingLevel.HEADING_1,\r\n                    }),\r\n\r\n                    new Paragraph({\r\n                        children: [\r\n                            new ImageRun({\r\n                                data: imageBase64,\r\n                                transformation: {\r\n                                    width: 850,\r\n                                    height: 300,\r\n                                },\r\n                            }),\r\n                        ],\r\n                    }),\r\n                ],\r\n            },\r\n        ],\r\n    })\r\n\r\n    Packer.toBlob(doc).then((blob) => {\r\n        saveAs(blob, \"modeling_result.docx\")\r\n    })\r\n}\r\n\r\nconst getCanvasImage = () => {\r\n    const canvas = document.querySelector(\".vis-network canvas\")\r\n\r\n    return canvas.toDataURL(\"image/png;base64;\")\r\n}\r\n","import React, { useState } from \"react\"\nimport useConfigGraph from \"./hooks/useConfigGraph\"\nimport ModelGraph from \"./components/ModelGraph\"\nimport { Layout, Row, Col, Button, Spin, Form, InputNumber, Typography, Divider, Collapse } from \"antd\"\nimport { LoadingOutlined } from \"@ant-design/icons\"\nimport { exportToDocx } from \"./helpers/exportHelper\"\nimport \"./App.css\"\nSpin.setDefaultIndicator(<LoadingOutlined style={{ fontSize: 24 }} spin />)\n\nconst { Title } = Typography\nconst { Panel } = Collapse\n\nconst App = () => {\n    const { configure, loading } = useConfigGraph()\n\n    const [isStart, setIsStart] = useState(false)\n    const [isConfig, setIsConfig] = useState(false)\n    const [nodesInColumn, setNodesInCoumn] = useState(5)\n\n    const [startConfig, setStartConfig] = useState()\n    const [currentState, setCurrentState] = useState()\n\n    const [time, setTime] = useState(100)\n    const [interval, setInterval] = useState(1000)\n\n    const configHandler = (data) => {\n        console.log(data)\n        const nodeCount = data.workingNodeCount + data.serviceNodeCount + data.defectiveNodeCount\n\n        const params = {\n            NodeCount: nodeCount,\n            WorkingNodeCount: data.workingNodeCount,\n            ServiceNodeCount: data.serviceNodeCount,\n            DefectiveNodeCount: data.defectiveNodeCount,\n            WorkingTimeMilliseconds: data.workingTimeMilliseconds,\n            ServiceTimeMilliseconds: data.serviceTimeMilliseconds,\n            RepairTimeMilliseconds: data.repairTimeMilliseconds,\n            ResourceCount: data.resourceCount,\n            ServicePrice: data.servicePrice,\n        }\n\n        const nodesInColumn = Math.round(Math.sqrt(nodeCount) / 2)\n        setNodesInCoumn(nodesInColumn)\n\n        configure(params).then(() => {\n            setStartConfig(params)\n            setIsConfig(true)\n        })\n    }\n\n    const startHandler = () => {\n        setIsStart(true)\n    }\n\n    const changeModel = (data) => {\n        setCurrentState(data)\n    }\n\n    return (\n        <Layout.Content>\n            <Row style={{ width: \"80vw\", margin: \"20px auto\" }}>\n                <Collapse style={{ width: \"100%\" }} defaultActiveKey={\"1\"}>\n                    <Panel header=\"Параметры модели\" key=\"1\">\n                        <Form onFinish={configHandler} style={{ width: \"100%\", padding: \"20px\" }}>\n                            <Title level={4} style={{ marginBottom: \"20px\" }}>\n                                Параметры модели\n                            </Title>\n                            <Row justify=\"space-between\">\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"workingNodeCount\"\n                                        label=\"Кол-во работающих узлов (Su)\"\n                                        initialValue={20}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"workingTimeMilliseconds\"\n                                        label=\"Кол-во времени в работе (Тг)\"\n                                        initialValue={3}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Row justify=\"space-between\">\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"serviceNodeCount\"\n                                        label=\"Кол-во узлов в сервисе (So)\"\n                                        initialValue={20}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"serviceTimeMilliseconds\"\n                                        label=\"Кол-во времени в сервисе (Тo)\"\n                                        initialValue={4}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Row justify=\"space-between\">\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"defectiveNodeCount\"\n                                        label=\"Кол-во дефектных узлов (Sh)\"\n                                        initialValue={10}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"repairTimeMilliseconds\"\n                                        label=\"Время обслуживания (Тp)\"\n                                        initialValue={0}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Row justify=\"space-between\">\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"resourceCount\"\n                                        label=\"Кол-во ресурсов на один узел\"\n                                        initialValue={10000}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                                <Col span={12}>\n                                    <Form.Item\n                                        name=\"servicePrice\"\n                                        label=\"Стоимость обслуживания (Ro)\"\n                                        initialValue={15}\n                                        rules={[{ required: true }]}\n                                    >\n                                        <InputNumber />\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Divider />\n                            <Row justify=\"space-between\">\n                                <Col span={12}>\n                                    <Form.Item label=\"Время моделирования (единиц времени)\">\n                                        <InputNumber onChange={(v) => setTime(v)} value={time} />\n                                    </Form.Item>\n                                </Col>\n                                <Col span={12}>\n                                    <Form.Item label=\"Частота обновления модели (кол-во мс)\">\n                                        <InputNumber onChange={(v) => setInterval(v)} value={interval} />\n                                    </Form.Item>\n                                </Col>\n                            </Row>\n                            <Divider />\n                            <Form.Item>\n                                <Row justify=\"space-between\">\n                                    <Button disabled={isConfig} loading={loading} type=\"primary\" htmlType=\"submit\">\n                                        Сконфигурировать модель\n                                    </Button>\n\n                                    <Button type=\"primary\" onClick={() => exportToDocx(startConfig, currentState)}>\n                                        Экспорт в docx\n                                    </Button>\n                                </Row>\n                            </Form.Item>\n                        </Form>\n                    </Panel>\n                </Collapse>\n            </Row>\n\n            <ModelGraph\n                nodesInColumn={nodesInColumn}\n                isStartedModel={isStart}\n                isConfig={isConfig}\n                time={time}\n                interval={interval}\n                changeModel={(data) => changeModel(data)}\n                startModel={() => startHandler()}\n                stopModel={() => setIsStart(false)}\n            />\n        </Layout.Content>\n    )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport \"antd/dist/antd.less\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}